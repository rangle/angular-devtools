!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("protocol"),require("semver-dsl"),require("rxjs"),require("shared-utils"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ng-devtools-backend",["exports","protocol","semver-dsl","rxjs","shared-utils","rxjs/operators"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self)["ng-devtools-backend"]={},e.protocol,e.semverDsl,e.rxjs,e.sharedUtils,e.rxjs.operators)}(this,(function(e,n,t,o,r,i){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */Object.create;function c(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],o=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var o,r,i=t.call(e),c=[];try{for(;(void 0===n||n-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(r)throw r.error}}return c}Object.create;var u,s,p=function(e){var n=window;n.Zone&&n.Zone.current?"angular"===n.Zone.current._name?n.Zone.current._parent.run(e):n.Zone.current.run(e):e()},l=function(e){return e.constructor.Éµcmp},d=function(e){if("undefined"==typeof customElements)return!1;if(!(e instanceof HTMLElement))return!1;var n=e.tagName.toLowerCase();return!!customElements.get(n)};var f,v,h,y=function(e){if(!e)return{component:null,host:null};for(;e;){var n=e instanceof HTMLElement&&ng.getComponent(e);if(n)return{component:n,host:e};if(!e.parentElement)break;e=e.parentElement}return{component:null,host:null}},m=function(e){return e?e.constructor.name:"unknown"},g=function(e){var n=y(e).component,t=function(e){if(!(e instanceof HTMLElement))return;if(!function(e){if(!e)return!1;var n=e.ownerDocument.documentElement,t=e.parentNode;return n===e||n===t||!(!t||1!==t.nodeType||!n.contains(t))}(e))return;return e.getBoundingClientRect()}(e);if(u||((u=document.createElement("div")).style.backgroundColor="rgba(104, 182, 255, 0.35)",u.style.position="fixed",u.style.zIndex="2147483647",u.style.pointerEvents="none",u.style.display="flex",u.style.borderRadius="3px",u.setAttribute("id","____ngDevToolsHighlight"),(s=document.createElement("div")).style.backgroundColor="rgba(104, 182, 255, 0.9)",s.style.position="absolute",s.style.bottom="-23px",s.style.right="0px",s.style.fontFamily="monospace",s.style.fontSize="11px",s.style.padding="2px 3px",s.style.borderRadius="3px",s.style.color="white",u.appendChild(s)),t){var o=[],r=m(n);if(r){var i=document.createElement("span");i.style.opacity="0.6",i.innerText="<";var c=document.createTextNode(r),a=document.createElement("span");a.style.opacity="0.6",a.innerText=">",o.push(i,c,a)}!function(e,n){var t=e.width,o=void 0===t?0:t,r=e.height,i=void 0===r?0:r,c=e.top,a=void 0===c?0:c,p=e.left,l=void 0===p?0:p;void 0===n&&(n=[]);u.style.width=~~o+"px",u.style.height=~~i+"px",u.style.top=~~a+"px",u.style.left=~~l+"px",s.innerHTML="",n.forEach((function(e){return s.appendChild(e)})),document.body.appendChild(u)}(t,o)}};function _(){u&&u.parentNode&&document.body.removeChild(u)}var b=document.querySelector("[ng-version]"),C="0.0.0",w=C;b&&(w=null!==(h=(null!==(v=(w=null!==(f=b.getAttribute("ng-version"))&&void 0!==f?f:C).match(/(\d+\.\d+\.\d+(-(next|rc)\.\d+)?)/))&&void 0!==v?v:[""])[0])&&void 0!==h?h:C);var P=w,k=19,D=function(){k=20};t.SemVerDSL(P).gte("10.0.0-next.4",D),t.SemVerDSL(P).eq("0.0.0",D);var x,T,E,S="__ngContext__",I=function(e){if(!e)return null;var n,t=e.__ngContext__;return t?(n=t,Array.isArray(n)&&"object"==typeof n[1]?t:t.lView):null},L=function(e){var n=e.__ngContext__;if(null!==n[0])return n[0];var t=n[1].components;return!(!t||1!==t.length)&&n[t[0]][0]},O=function(e,n,t){for(var o=[],r=null,i=n[t],c=e[t][0],a=(c.tagName||c.nodeName).toLowerCase(),u=i.directiveStart;u<i.directiveEnd;u++){var s=e[u],p=n[u];p&&p.template?r={name:a,instance:s,isElement:d(c)}:p&&o.push({name:m(s),instance:s})}return{element:a,nativeElement:e[t][0],directives:o,component:r,children:[]}},A=function(e,n){if(void 0===n&&(n=[]),o=e,Array.isArray(o)&&!0===o[1]){for(var t=9;t<e.length;t++)e[t]&&A(e[t],n);return n}var o,r=e,i=r[1];for(t=k;t<r.length;t++)if(r[t]&&i.data&&r[t][0]instanceof Node){var c=O(r,i.data,t);(c.component||c.directives.length)&&(n.push(c),A(r[t],c.children))}return n},M=function(e){return A(e)},j=((x={})[n.PropType.Boolean]=!0,x[n.PropType.String]=!0,x[n.PropType.Null]=!0,x[n.PropType.Number]=!0,x[n.PropType.Object]=!0,x[n.PropType.Undefined]=!0,x[n.PropType.Unknown]=!0,x[n.PropType.Array]=!1,x[n.PropType.BigInt]=!1,x[n.PropType.Function]=!1,x[n.PropType.HTMLNode]=!1,x[n.PropType.Symbol]=!1,x[n.PropType.Date]=!1,x),N=((T={})[n.PropType.Array]=function(e){return"Array("+e.length+")"},T[n.PropType.BigInt]=function(e){return q(e.toString())},T[n.PropType.Boolean]=function(e){return q(e.toString())},T[n.PropType.String]=function(e){return'"'+e+'"'},T[n.PropType.Function]=function(e){return e.name+"(...)"},T[n.PropType.HTMLNode]=function(e){return e.constructor.name},T[n.PropType.Null]=function(e){return"null"},T[n.PropType.Number]=function(e){return parseInt(e,10).toString()},T[n.PropType.Object]=function(e){return Object.keys(e).length>0?"{...}":"{}"},T[n.PropType.Symbol]=function(e){return"Symbol()"},T[n.PropType.Undefined]=function(e){return"undefined"},T[n.PropType.Date]=function(e){return"Date()"},T[n.PropType.Unknown]=function(e){return"unknown"},T),H=new Set([S,"__ngSimpleChanges__"]),F=((E={})[n.PropType.String]={editable:!0,expandable:!1},E[n.PropType.BigInt]={editable:!1,expandable:!1},E[n.PropType.Boolean]={editable:!0,expandable:!1},E[n.PropType.Number]={editable:!0,expandable:!1},E[n.PropType.Date]={editable:!0,expandable:!1},E[n.PropType.Null]={editable:!0,expandable:!1},E[n.PropType.Undefined]={editable:!0,expandable:!1},E[n.PropType.Symbol]={editable:!1,expandable:!1},E[n.PropType.Function]={editable:!1,expandable:!1},E[n.PropType.HTMLNode]={editable:!1,expandable:!1},E[n.PropType.Unknown]={editable:!1,expandable:!1},E),B=function(e){var n=e.type,t={type:n,expandable:F[n].expandable,editable:F[n].editable,preview:N[e.type](e.prop)};return void 0!==e.prop&&j[n]&&(t.value=e.prop),t},U=function(e,t,o,r){var i=e.type,c=e.prop,a=t.currentLevel;switch(i){case n.PropType.Array:return o.map((function(e){return r(c[e.name],e.children,a+1)}));case n.PropType.Object:return o.reduce((function(e,n){return c.hasOwnProperty(n.name)&&"string"==typeof n.name&&!H.has(n.name)&&(e[n.name]=r(c[n.name],n.children,a+1)),e}),{})}},V=function(e,t,o){var r=e.type,i=e.prop,c=t.currentLevel,a=t.level;switch(r){case n.PropType.Array:return i.map((function(e,n){return o(e,n,c+1,a)}));case n.PropType.Object:return Object.keys(i).reduce((function(e,n){return"string"!=typeof n||H.has(n)||(e[n]=o(i[n],n,c+1,a)),e}),{})}},q=function(e,n){return void 0===n&&(n=20),e.length>n?e.substr(0,n)+"...":e},R=new Set([S,"__ngSimpleChanges__"]),z={boolean:n.PropType.Boolean,bigint:n.PropType.BigInt,function:n.PropType.Function,number:n.PropType.Number,string:n.PropType.String,symbol:n.PropType.Symbol},Z=function(e){if(void 0===e)return n.PropType.Undefined;if(null===e)return n.PropType.Null;if(e instanceof HTMLElement)return n.PropType.HTMLNode;var t=typeof e;return void 0!==z[t]?z[t]:"object"===t?Array.isArray(e)?n.PropType.Array:"[object Date]"===Object.prototype.toString.call(e)?n.PropType.Date:e instanceof Node?n.PropType.HTMLNode:n.PropType.Object:n.PropType.Unknown},$=function(e,t,o,r){void 0===o&&(o=0),void 0===r&&(r=1);var i={prop:e,type:Z(e)},c={level:r,currentLevel:o};if(o<r)return G(e,void 0,o,r,Q(t,r));switch(i.type){case n.PropType.Array:case n.PropType.Object:return function(e,n,t,o){var r=e.type,i=e.prop,c={type:r,editable:!1,expandable:Object.keys(i).length>0,preview:N[e.type](e.prop)};if(t&&t.length){var a=U(e,n,t,o);void 0!==a&&(c.value=a)}return c}(i,c,t,$);default:return B(i)}},Q=function(e,n){return function(t,o,r){var i=e.findIndex((function(e){return e.name===o}));return $(t,i<0?[]:e[i].children,r,n)}},G=function(e,t,o,r,i){void 0===t&&(t=void 0),void 0===o&&(o=0),void 0===r&&(r=1),void 0===i&&(i=G);var c={prop:e,type:Z(e)},a={level:r,currentLevel:o};switch(c.type){case n.PropType.Array:case n.PropType.Object:return function(e,n,t){var o=e.type,r=e.prop,i={type:o,editable:!1,expandable:Object.keys(r).length>0,preview:N[e.type](e.prop)};if(void 0!==n.level&&n.currentLevel<n.level){var c=V(e,n,t);void 0!==c&&(i.value=c)}return i}(c,a,i);default:return B(c)}},J=function(e,n){void 0===n&&(n=1);var t={};for(var o in e)e.hasOwnProperty(o)&&!R.has(o)&&(t[o]=G(e[o],null,0,n));return t},K=function(e,n){var t={};return Object.keys(e).forEach((function(o){if(!R.has(o)){var r=n.findIndex((function(e){return e.name===o}));t[o]=r<0?G(e[o]):$(e[o],n[r].children)}})),t},W=function(e,t){t=null!=t?t:ee();var o=ne(e.selectedElement,t);if(o){var r={},i=function(t){e.propertyQuery.type===n.PropertyQueryTypes.All&&(r[t.name]={props:J(t.instance),metadata:X(t.instance)}),e.propertyQuery.type===n.PropertyQueryTypes.Specified&&(r[t.name]={props:K(t.instance,e.propertyQuery.properties[t.name]||[]),metadata:X(t.instance)})};return o.directives.forEach(i),o.component&&i(o.component),r}},X=function(e){var n=function(n){try{return e.constructor.Éµcmp?e.constructor.Éµcmp[n]:e.constructor.Éµdir[n]}catch(t){return void console.warn("Could not find metadata for key: "+n+" in directive:",e)}};return{inputs:n("inputs"),outputs:n("outputs"),encapsulation:n("encapsulation"),onPush:n("onPush")}},Y=function(e,n){if(void 0===n&&(n=new Set),!(e instanceof HTMLElement))return n;var t=I(e);if(t)return n.add(t),n;for(var o=0;o<e.children.length;o++)Y(e.children[o],n);return n},ee=function(){var e=function(e){var n=e.querySelectorAll("[ng-version]");return Y(e,new Set(Array.from(n).map(I)))}(document.documentElement);return Array.prototype.concat.apply([],function(e,n){for(var t=0,o=n.length,r=e.length;t<o;t++,r++)e[r]=n[t];return e}([],a(e)).map(M))},ne=function(e,n){var t,o;if(!e.length)return null;var r=null;try{for(var i=c(e),a=i.next();!a.done;a=i.next()){if(!(r=n[a.value]))return null;n=r.children}}catch(e){t={error:e}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(t)throw t.error}}return r},te=function(e){var n=window.ng,t=ne(e.directiveId.element,ee());if(t){if(void 0!==e.directiveId.directive){var o=t.directives[e.directiveId.directive].instance;return oe(e,o),void n.applyChanges(n.getOwningComponent(o))}if(t.component){var r=t.component.instance;return oe(e,r),void n.applyChanges(r)}}else console.warn("Could not update the state of component",e,"because the component was not found")},oe=function(e,n){var t=e.keyPath.pop();if(void 0!==t){var o=n;e.keyPath.forEach((function(e){o=o[e]})),o[t]=e.newValue}};function re(e){var n,t=(null===(n=e.rootComponentType)||void 0===n?void 0:n.name)||"no-name",o=e.config;return{handler:t,name:t,path:"/",children:o?ie(null,o):[],isAux:!1,specificity:null,data:null,hash:null}}function ie(e,n){return n.map((function(n){var t,o=function(e){return e.component?e.component.name:e.loadChildren?e.path+" [Lazy]":e.redirectTo?e.path+' -> redirecting to -> "'+e.redirectTo+'"':"no-name-route"}(n),r=(null===(t=n._loadedConfig)||void 0===t?void 0:t.routes)||n.children,i=!!n.outlet,c=n.outlet?"("+n.outlet+":"+n.path+")":n.path,a={handler:o,data:[],hash:null,specificity:null,name:o,path:((e||"")+"/"+c).split("//").join("/"),isAux:i,children:[]};if(r&&(a.children=ie(a.path,r)),n.data)for(var u in n.data)n.data.hasOwnProperty(u)&&a.data.push({key:u,value:n.data[u]});return a}))}var ce,ae,ue=function(){function e(){this._directiveIdCounter=0,this._currentDirectivePosition=new Map,this._currentDirectiveId=new Map,this._isComponent=new Map}return e.prototype.getDirectivePosition=function(e){return this._currentDirectivePosition.get(e)},e.prototype.getDirectiveId=function(e){return this._currentDirectiveId.get(e)},e.prototype.hasDirective=function(e){return this._currentDirectiveId.has(e)},e.prototype.index=function(){var e=this,n=ee(),t=pe(n),o=[],r=[],i=new Set;return t.forEach((function(n){return e._index(n,null,o,i)})),this._currentDirectiveId.forEach((function(n,t){i.has(t)||r.push({directive:t,isComponent:!!e._isComponent.get(t)})})),{newNodes:o,removedNodes:r,indexedForest:t,directiveForest:n}},e.prototype._index=function(e,n,t,o){var r=this;e.component&&(o.add(e.component.instance),this._isComponent.set(e.component.instance,!0),this._indexNode(e.component.instance,e.position,t)),(e.directives||[]).forEach((function(n){o.add(n.instance),r._isComponent.set(n.instance,!1),r._indexNode(n.instance,e.position,t)})),e.children.forEach((function(e){return r._index(e,n,t,o)}))},e.prototype._indexNode=function(e,n,t){this._currentDirectivePosition.set(e,n),this._currentDirectiveId.has(e)||(t.push({directive:e,isComponent:!!this._isComponent.get(e)}),this._currentDirectiveId.set(e,this._directiveIdCounter++))},e.prototype.destroy=function(){this._currentDirectivePosition=new Map,this._currentDirectiveId=new Map},e}(),se=function(e,n,t){void 0===t&&(t=[]);var o=t.concat([n]);return{position:o,element:e.element,component:e.component,directives:e.directives.map((function(e){return Object.assign({position:o},e)})),children:e.children.map((function(e,n){return se(e,n,o)})),nativeElement:e.nativeElement}},pe=function(e){return e.map((function(e,n){return se(e,n)}))},le=["OnInit","OnDestroy","OnChanges","DoCheck","AfterContentInit","AfterContentChecked","AfterViewInit","AfterViewChecked"],de=new Set(le.map((function(e){return"ng"+e}))),fe=["preOrderHooks","preOrderCheckHooks","contentHooks","contentCheckHooks","viewHooks","viewCheckHooks","destroyHooks"],ve=function(e,n){var t,o,r,i,a=Object.getPrototypeOf(e),u=Object.getOwnPropertyNames(a);try{for(var s=c(u),p=s.next();!p.done;p=s.next()){var l=p.value;if(de.has(l)&&a[l]===n)return l}}catch(e){t={error:e}}finally{try{p&&!p.done&&(o=s.return)&&o.call(s)}finally{if(t)throw t.error}}var d=n.name;if("string"!=typeof d)return"unknown";try{for(var f=c(le),v=f.next();!v.done;v=f.next()){var h=v.value;if(d.indexOf(h)>=0)return"ng"+h}}catch(e){r={error:e}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return"unknown"},he=function(){function e(e){this._patched=new Map,this._undoLifecyclePatch=[],this._lastChangeDetection=new Map,this._tracker=new ue,this._forest=[],this._indexedForest=[],this._inChangeDetection=!1,this._changeDetection$=new o.Subject,this._hooks=[],this._hooks.push(e)}return Object.defineProperty(e.prototype,"changeDetection$",{get:function(){return this._changeDetection$},enumerable:!1,configurable:!0}),e.prototype.getDirectivePosition=function(e){var n=this._tracker.getDirectivePosition(e);return void 0===n&&console.warn("Unable to find position of",e),n},e.prototype.getDirectiveId=function(e){var n=this._tracker.getDirectiveId(e);return void 0===n&&console.warn("Unable to find ID of",n),n},e.prototype.getIndexedDirectiveForest=function(){return this._indexedForest},e.prototype.getDirectiveForest=function(){return this._forest},e.prototype.initialize=function(){this.indexForest()},e.prototype.destroy=function(){var e,n;this._lastChangeDetection=new Map,this._tracker.destroy();try{for(var t=c(this._patched),o=t.next();!o.done;o=t.next()){var r=a(o.value,2),i=r[0],u=r[1],s=l(i);s.template=u,s.tView.template=u}}catch(n){e={error:n}}finally{try{o&&!o.done&&(n=t.return)&&n.call(t)}finally{if(e)throw e.error}}this._patched=new Map,this._undoLifecyclePatch.forEach((function(e){return e()})),this._undoLifecyclePatch=[]},e.prototype.indexForest=function(){var e=this,n=this._tracker.index(),t=n.newNodes,o=n.removedNodes,r=n.indexedForest,i=n.directiveForest;this._indexedForest=r,this._forest=i,t.forEach((function(n){e._observeLifecycle(n.directive,n.isComponent),e._observeComponent(n.directive),e._fireCreationCallback(n.directive,n.isComponent)})),o.forEach((function(n){e._patched.delete(n.directive),e._fireDestroyCallback(n.directive,n.isComponent)}))},e.prototype.subscribe=function(e){this._hooks.push(e)},e.prototype.unsubscribe=function(e){this._hooks.splice(this._hooks.indexOf(e),1)},e.prototype._fireCreationCallback=function(e,n){var t=this._tracker.getDirectivePosition(e),o=this._tracker.getDirectiveId(e);this._onCreate(e,L(e),o,n,t)},e.prototype._fireDestroyCallback=function(e,n){var t=this._tracker.getDirectivePosition(e),o=this._tracker.getDirectiveId(e);this._onDestroy(e,L(e),o,n,t)},e.prototype._observeComponent=function(e){var n=l(e);if(n){var t=n.template,o=this;t.patched||(n.tView.template=function(e,n){o._inChangeDetection||(o._inChangeDetection=!0,p((function(){Promise.resolve().then((function(){o._changeDetection$.next(),o._inChangeDetection=!1}))})));var r=o._tracker.getDirectivePosition(n),i=performance.now(),c=o._tracker.getDirectiveId(n);o._onChangeDetectionStart(n,L(n),c,r),t.apply(this,arguments),o._tracker.hasDirective(n)&&void 0!==c&&void 0!==r?o._onChangeDetectionEnd(n,L(n),c,r):o._lastChangeDetection.set(n,performance.now()-i)},n.tView.template.patched=!0,this._patched.set(e,t))}},e.prototype._observeLifecycle=function(e,n){var t=this,o=I(e);if(o){var r=o[1];fe.forEach((function(e){var o=r[e];Array.isArray(o)&&o.forEach((function(e,r){if(!e.patched&&"function"==typeof e){var i=t;o[r]=function(){if(this.__ngContext__){var t=i._tracker.getDirectiveId(this),o=ve(this,e),r=L(this);i._onLifecycleHookStart(this,o,r,t,n);var c=e.apply(this,arguments);return i._onLifecycleHookEnd(this,o,r,t,n),c}},o[r].patched=!0,t._undoLifecyclePatch.push((function(){o[r]=e}))}}))}))}},e.prototype._onCreate=function(e,n,t,o,r){void 0!==t&&void 0!==r&&this._invokeCallback("onCreate",arguments)},e.prototype._onDestroy=function(e,n,t,o,r){void 0!==t&&void 0!==r&&this._invokeCallback("onDestroy",arguments)},e.prototype._onChangeDetectionStart=function(e,n,t,o){void 0!==t&&void 0!==o&&this._invokeCallback("onChangeDetectionStart",arguments)},e.prototype._onChangeDetectionEnd=function(e,n,t,o){void 0!==t&&void 0!==o&&this._invokeCallback("onChangeDetectionEnd",arguments)},e.prototype._onLifecycleHookStart=function(e,n,t,o,r){void 0!==o&&this._invokeCallback("onLifecycleHookStart",arguments)},e.prototype._onLifecycleHookEnd=function(e,n,t,o,r){void 0!==o&&this._invokeCallback("onLifecycleHookEnd",arguments)},e.prototype._invokeCallback=function(e,n){this._hooks.forEach((function(t){var o=t[e];o&&o.apply(null,n)}))},e}(),ye=function(e,n){return"ðŸ…°ï¸ "+e+"#"+n},me=globalThis.performance&&"function"==typeof globalThis.performance.getEntriesByName,ge=function(e,n){me&&performance.mark(ye(e,n)+"_start")},_e=function(e,n){if(me){var t=ye(e,n),o=t+"_start",r=t+"_end";performance.getEntriesByName(o).length>0&&(performance.mark(r),performance.measure(t,o,r)),performance.clearMarks(o),performance.clearMarks(r),performance.clearMeasures(t)}},be=!1,Ce=function(){return be=!0},we=function(){return be=!1},Pe=function(){return be},ke=function(){return ce||((ce=new he({onChangeDetectionStart:function(e){Pe()&&ge(m(e),"changeDetection")},onChangeDetectionEnd:function(e){Pe()&&_e(m(e),"changeDetection")},onLifecycleHookStart:function(e,n){Pe()&&ge(m(e),n)},onLifecycleHookEnd:function(e,n){Pe()&&_e(m(e),n)}})).initialize(),ce)},De=!1,xe=!1,Te=0,Ee={},Se=function(){var e=ke(),n=Me(e);return ke().unsubscribe(Ee),Ee={},De=!1,n},Ie=function(e,n,t){e[m(n)+"#"+t]=performance.now()},Le=function(e,n,t){return e[m(n)+"#"+t]},Oe=function(e){var n={};return{onCreate:function(e,n,t,o,r){ae.set(e,{isElement:d(n),name:m(e),isComponent:o,lifecycle:{}})},onChangeDetectionStart:function(t,o){if(Ie(n,t,"changeDetection"),!xe){xe=!0;var r=je();p((function(){Promise.resolve().then((function(){xe=!1,e(Me(ke(),r))}))}))}ae.has(t)||ae.set(t,{isElement:d(o),name:m(t),isComponent:!0,changeDetection:0,lifecycle:{}})},onChangeDetectionEnd:function(e){var t=ae.get(e);if(t){var o=t.changeDetection;void 0===o&&(o=0);var r=Le(n,e,"changeDetection");if(void 0===r)return;var i=performance.now()-r;t.changeDetection=o+i,Te+=i}else console.warn("Could not find profile for",e)},onDestroy:function(e,n,t,o,r){ae.has(e)||ae.set(e,{isElement:o&&d(n),name:m(e),isComponent:o,lifecycle:{}})},onLifecycleHookStart:function(e,t,o,r,i){Ie(n,e,t),ae.has(e)||ae.set(e,{isElement:d(o),name:m(e),isComponent:i,lifecycle:{}})},onLifecycleHookEnd:function(e,t,o,r,i){var c=ae.get(e),a=Le(n,e,t);if(void 0!==a)if(c){var u=performance.now()-a;c.lifecycle[t]=(c.lifecycle[t]||0)+u,Te+=u}else console.warn("Could not find directive in onLifecycleHook callback",e,t)}}},Ae=function(e,n,t){if(t){for(var o=e,r=0;r<n.length-1;r++){var i=n[r];if(!e[i])return void console.warn("Unable to find parent node for",t,o);e=e[i].children}var a=n[n.length-1],u={children:[],directives:[]};e[a]?u=e[a]:e[a]=u,function(e,n){var t=!1;e.directives.forEach((function(e){var o,r,i;if(e.name===n.name){t=!0;var a=e.changeDetection;void 0===a&&(a=0),e.changeDetection=a+(null!==(i=n.changeDetection)&&void 0!==i?i:0);try{for(var u=c(Object.keys(n.lifecycle)),s=u.next();!s.done;s=u.next()){var p=s.value;e.lifecycle[p]||(e.lifecycle[p]=0),e.lifecycle[p]+=n.lifecycle[p]}}catch(e){o={error:e}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(o)throw o.error}}}})),t||e.directives.push(n)}(u,t)}},Me=function(e,n){void 0===n&&(n="");var t=Array.from(ae.keys()),o=[],r=new Map;t.forEach((function(n){var t=e.getDirectivePosition(n);void 0!==t&&(o.push(t),r.set(t,n))})),o.sort(Ne);var i=function(e,n){var t={source:e,duration:n,directives:[]},o=ke(),r=o.getIndexedDirectiveForest(),i=function(e,n){var r;if(void 0===n&&(n=t.directives),void 0!==(r=e.component?o.getDirectivePosition(e.component.instance):o.getDirectivePosition(e.directives[0].instance))){var c=e.directives.map((function(e){return{isComponent:!1,isElement:!1,name:m(e.instance),lifecycle:{}}}));e.component&&c.push({isElement:e.component.isElement,isComponent:!0,lifecycle:{},name:m(e.component.instance)});var a={children:[],directives:c};n[r[r.length-1]]=a,e.children.forEach((function(e){return i(e,a.children)}))}};return r.forEach((function(e){return i(e)})),t}(n,Te);return Te=0,o.forEach((function(e){var n=r.get(e);Ae(i.directives,e,ae.get(n))})),ae=new Map,i},je=function(){var e=window.Zone;return e&&e.currentTask?e.currentTask.source:""},Ne=function(e,n){if(e.length<n.length)return-1;if(e.length>n.length)return 1;for(var t=0;t<e.length;t++){if(e[t]<n[t])return-1;if(e[t]>n[t])return 1}return 0},He=function(){function e(e){void 0===e&&(e={onComponentEnter:function(){},onComponentLeave:function(){},onComponentSelect:function(){}}),this.bindMethods(),this._onComponentEnter=e.onComponentEnter,this._onComponentSelect=e.onComponentSelect,this._onComponentLeave=e.onComponentLeave}return e.prototype.startInspecting=function(){window.addEventListener("mouseover",this.elementMouseOver,!0),window.addEventListener("click",this.elementClick,!0),window.addEventListener("mouseout",this.cancelEvent,!0)},e.prototype.stopInspecting=function(){window.removeEventListener("mouseover",this.elementMouseOver,!0),window.removeEventListener("click",this.elementClick,!0),window.removeEventListener("mouseout",this.cancelEvent,!0)},e.prototype.elementClick=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._selectedComponent.component&&this._selectedComponent.host&&this._onComponentSelect(ke().getDirectiveId(this._selectedComponent.component))},e.prototype.elementMouseOver=function(e){this.cancelEvent(e);var n=e.target;n&&(this._selectedComponent=y(n)),_(),this._selectedComponent.component&&this._selectedComponent.host&&(g(this._selectedComponent.host),this._onComponentEnter(ke().getDirectiveId(this._selectedComponent.component)))},e.prototype.cancelEvent=function(e){e.stopImmediatePropagation(),e.preventDefault(),this._onComponentLeave()},e.prototype.bindMethods=function(){this.startInspecting=this.startInspecting.bind(this),this.stopInspecting=this.stopInspecting.bind(this),this.elementMouseOver=this.elementMouseOver.bind(this),this.elementClick=this.elementClick.bind(this),this.cancelEvent=this.cancelEvent.bind(this)},e.prototype.highlightByPosition=function(e){var n=function(e,n){var t=ne(e,n);return t?t.nativeElement:null}(e,ke().getDirectiveForest());n&&g(n)},e}(),Fe=[],Be=function(e){Ue(e),Fe.unshift(e),Ve(Fe)},Ue=function(e){var n=Fe.findIndex((function(n){return r.arrayEquals(n.position,e.position)}));-1!==n?Fe.splice(n,1):5===Fe.length&&Fe.pop()},Ve=function(e){e.forEach((function(e,n){return qe(e.node,Re(n))}))},qe=function(e,n){Object.defineProperty(window,n,{get:function(){return(null==e?void 0:e.component)?e.component.instance:(null==e?void 0:e.nativeElement)?e.nativeElement:e},configurable:!0})},Re=function(e){return"$ng"+e},ze=function(){return $e()&&Qe()},Ze=function(){var e,n,t,o;return!!(null===(o=null===(t=null===(n=(e=window).getAllAngularRootElements)||void 0===n?void 0:n.call(e))||void 0===t?void 0:t[0])||void 0===o?void 0:o.__ngContext__)},$e=function(){return!!Ge()},Qe=function(){return"undefined"!=typeof ng},Ge=function(){var e=document.querySelector("[ng-version]");return e?e.getAttribute("ng-version"):null},Je=function(e){e.on("shutdown",Ke(e)),e.on("getLatestComponentExplorerView",We(e)),e.on("queryNgAvailability",Xe(e)),e.on("startProfiling",en(e)),e.on("stopProfiling",nn(e)),e.on("setSelectedComponent",tn),e.on("getNestedProperties",on(e)),e.on("getRoutes",Ye(e)),e.on("updateState",te),e.on("enableTimingAPI",Ce),e.on("disableTimingAPI",we),ze()&&function(){var e=Ge();if(!e)return!1;var n=parseInt(e.toString().split(".")[0],10);return $e()&&(n>=9||0===n)}()&&Ze()&&(an(e),p((function(){ke().changeDetection$.pipe(i.debounceTime(250)).subscribe((function(){return e.emit("componentTreeDirty")}))})))},Ke=function(e){return function(){e.destroy()}},We=function(e){return function(n){ke().indexForest(),n?e.emit("latestComponentExplorerView",[{forest:un(ke().getIndexedDirectiveForest()),properties:W(n,ke().getDirectiveForest())}]):e.emit("latestComponentExplorerView",[{forest:un(ke().getIndexedDirectiveForest())}])}},Xe=function(e){return function(){return cn(e)}},Ye=function(e){return function(){return rn(e)}},en=function(e){return function(){return function(e){if(De)throw new Error("Recording already in progress");ae=new Map,De=!0,Ee=Oe(e),ke().subscribe(Ee)}((function(n){e.emit("sendProfilerChunk",[n])}))}},nn=function(e){return function(){e.emit("profilerResults",[Se()])}},tn=function(e){var n,t=ne(e,ke().getIndexedDirectiveForest());null!==(n={node:t,position:e}).node&&Be(n)},on=function(e){return function(n,t){var o,r,i=function(){return e.emit("nestedProperties",[n,{props:{}},t])},a=ne(n.element,ke().getIndexedDirectiveForest());if(!a)return i();var u=void 0===n.directive?a.component:a.directives[n.directive];if(!u)return i();var s=u.instance;try{for(var p=c(t),l=p.next();!l.done;l=p.next()){(s=s[l.value])||console.error("Cannot access the properties",t,"of",a)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(r=p.return)&&r.call(p)}finally{if(o)throw o.error}}e.emit("nestedProperties",[n,{props:J(s)},t])}},rn=function(e){var n,t,o=ne([0],ke().getIndexedDirectiveForest()),r=[];(null===(n=null==o?void 0:o.component)||void 0===n?void 0:n.instance.router)&&(r=[re(null===(t=null==o?void 0:o.component)||void 0===t?void 0:t.instance.router)]),e.emit("updateRouterTree",[r])},cn=function(e){var n=Ge(),t=Ze();n?(t&&ke(),e.emit("ngAvailability",[{version:n.toString(),devMode:ze(),ivy:t}])):setTimeout((function(){return cn(e)}),500)},an=function(e){var n=new He({onComponentEnter:function(n){e.emit("highlightComponent",[n])},onComponentLeave:function(){e.emit("removeComponentHighlight")},onComponentSelect:function(n){e.emit("selectComponent",[n])}});e.on("inspectorStart",n.startInspecting),e.on("inspectorEnd",n.stopInspecting),e.on("createHighlightOverlay",(function(e){n.highlightByPosition(e)})),e.on("removeHighlightOverlay",_)},un=function(e){return e.map((function(e){return{element:e.element,component:e.component?{name:e.component.name,isElement:e.component.isElement,id:ke().getDirectiveId(e.component.instance)}:null,directives:e.directives.map((function(e){return{name:e.name,id:ke().getDirectiveId(e.instance)}})),children:un(e.children)}}))};e.findNodeFromSerializedPosition=function(e){var n=e.split(",").map((function(e){return parseInt(e,10)}));return ne(n,ee())},e.initializeMessageBus=function(e){Je(e)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-devtools-backend.umd.min.js.map