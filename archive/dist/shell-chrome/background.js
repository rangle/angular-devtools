"use strict";(self.___ngDevToolsRuntime=self.___ngDevToolsRuntime||[]).push([[352],{410:()=>{const o=chrome.browserAction||{setIcon:()=>{},setPopup:()=>{}};o.setIcon({path:{16:"assets/icon-bw16.png",48:"assets/icon-bw48.png",128:"assets/icon-bw128.png"}});const t={};chrome.runtime.onConnect.addListener(e=>{let n=null,i=null;if(console.log("Connection event in the background script"),l(e.name))n=e.name,console.log("Angular devtools connected, injecting the content script",e.name,t[n]),i="devtools",a(parseInt(e.name,10));else{if(!e.sender||!e.sender.tab)return void console.error("Unable to access the port sender and sender tab");if(void 0===e.sender.tab.id)return void console.error("Sender tab id is undefined");console.log("Content script connected",e.sender.tab.id),n=e.sender.tab.id.toString(),i="content-script"}let s=t[n];s||(console.log("Creating a tab port"),s=t[n]={devtools:null,"content-script":null}),s[i]=e,s.devtools&&s["content-script"]&&d(s.devtools,s["content-script"],n)});const l=e=>+e+""===e,a=e=>{console.log("Installing the content-script"),chrome.tabs.executeScript(e,{file:"/content-script.js"},n=>{chrome.tabs.executeScript(e,{code:"___devToolsContentScript.main()"})})},d=(e,n,i)=>{if(null===e)return void console.warn("DevTools port is equal to null");console.log("Creating two-way communication channel",Date.now(),t);const s=c=>{n.postMessage(c)};e.onMessage.addListener(s);const r=c=>{e.postMessage(c)};n.onMessage.addListener(r);const u=c=>{console.log("Disconnecting",c),e.onMessage.removeListener(s),n.onMessage.removeListener(r),e.disconnect(),n.disconnect(),t[i]=void 0};e.onDisconnect.addListener(u.bind(null,"devtools")),n.onDisconnect.addListener(u.bind(null,"content-script"))},p=e=>e.isAngular?e.isIvy&&e.isSupportedAngularVersion?e.isDebugMode?"supported.html":"production.html":"unsupported.html":"not-angular.html";chrome.runtime.onMessage.addListener((e,n)=>{!e.isAngularDevTools||(n&&n.tab&&o.setPopup({tabId:n.tab.id,popup:`popups/${p(e)}`}),n&&n.tab&&e.isAngular&&o.setIcon({tabId:n.tab.id,path:{16:"assets/icon16.png",48:"assets/icon48.png",128:"assets/icon128.png"}}))})}},o=>{o(o.s=410)}]);